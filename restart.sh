#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ Ayi
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: ./restart.sh

echo "üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ Ayi –∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º..."

while true; do
    echo "üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."
    npm start
    
    exit_code=$?
    echo "‚ö†Ô∏è –ë–æ—Ç –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç—É –∑ –∫–æ–¥–æ–º: $exit_code"
    
    if [ $exit_code -eq 0 ]; then
        echo "‚úÖ –ë–æ—Ç –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç—É –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
        break
    else
        echo "‚ùå –ë–æ—Ç –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç—É –∑ –ø–æ–º–∏–ª–∫–æ—é, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥..."
        sleep 5
    fi
done

echo "üèÅ –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ"